# WindRacer - Sailing Yacht Simulator

- [Play the game!](https://tranquilo-01.github.io/projects/WindRacer/index.html)

Developed as a project for the Computer Game Technologies class in the field of Computer Science at AGH University of Science and Technology.

## Project Idea

The core idea was to create a 2D sailing yacht simulation with a visual style reminiscent of a chartplotter display. The goal was to achieve a degree of realism in the yacht's movement and handling, though some simplifications were necessary for the scope of a simple project.

## Gameplay

Navigate your yacht through a series of levels, avoiding islands and shoals. Reach the finish line to complete the level.

### Controls

- **Steering:**
  - `A`: Turn Port (left)
  - `D`: Turn Starboard (right)
- **Sail Trim:**
  - `W`: Sheet In (trim sail closer to the boat's centerline)
  - `S`: Ease Out (let sail out further from the boat's centerline)
- **Game Flow:**
  - `SPACE`: Start the level (after the initial "Press SPACE to Start" prompt).

## Physics Implementation (`src/scenes/objects/boat.ts`)

The `boat.ts` file contains the core physics model for the yacht. The simulation attempts to model several key forces acting on a sailboat:

### Forces Applied:

1.  **Sail Forces:**

    - **Lift Force:** Generated by the wind flowing over the sail. The magnitude and direction depend on:
      - Apparent Wind Speed (AWS)
      - Angle of Attack (AoA): The angle between the apparent wind and the sail.
      - A lift coefficient curve is implemented, attempting to model how lift changes with AoA (e.g., stalling at high AoA).
      - The direction of lift is generally perpendicular to the apparent wind.
    - **Drag Force (Sail):** Resistance from the wind on the sail. This also depends on AWS and AoA, with a drag coefficient curve.
      - The direction of sail drag is aligned with the apparent wind.

2.  **Hydrodynamic Forces (Hull Interaction with Water):**

    - **Water Friction Resistance:** Drag caused by the hull moving through the water. This is dependent on the boat's speed (SOG - Speed Over Ground) and wetted area.
    - **Wave Resistance:** Resistance generated by the boat creating waves as it moves. This force becomes significantly larger as the boat approaches its hull speed. The implementation uses a formula that increases sharply with speed, especially around and above hull speed.
    - **Anti-Drift Force (Lateral Resistance):** This force counteracts the sideways push from the wind on the sails (leeway). It's crucial for allowing the boat to sail upwind.
      - Calculated based on the `driftVector` (the component of the boat's velocity perpendicular to its heading).
      - The magnitude depends on the drift speed, wetted area, and a drag coefficient.
      - The direction is opposite to the drift vector.

3.  **Torque and Rotation:**
    - **Steering Torque:** Applied by the player using 'A' and 'D' keys to simulate rudder action.
    - **Anti-Rotation Torque (Rotational Damping):** A damping force is applied to slow down the boat's rotation, making steering more manageable and preventing endless spinning. This is proportional to the boat's angular velocity.

### Key Concepts Modeled:

- **Apparent Wind:** The wind experienced by the moving boat. It's a vector sum of the True Wind and the wind generated by the boat's own motion (Boat Wind). All sail forces are calculated based on Apparent Wind Speed (AWS) and Apparent Wind Angle (AWA).
- **Sail Trim:** Players can adjust the `trimmedSailAngle` using 'W' and 'S'. The actual `sailAngle` is then determined by the `trimmedSailAngle` and the AWA, preventing the sail from being trimmed in too far when sailing into the wind (simulating "in irons" or stalling).
- **Angle of Attack (AoA):** Critical for determining lift and drag coefficients for the sail.
- **Tack:** The simulation determines if the boat is on a starboard or port tack (wind coming over the starboard or port side, respectively), which influences the direction of the lift force.
- **Drift/Leeway:** The sideways motion of the boat due to wind pressure on the sails. The `getDriftVector()` and `getAntiDriftForce()` methods handle this.
- **Hull Speed:** A theoretical maximum speed for a displacement hull, used in the wave resistance calculation.

### Simplifications and Approximations:

- **2D Environment:** All physics are calculated in a 2D plane.
- **Coefficient Curves:** The lift and drag coefficient curves for the sail are simplified approximations of real aerodynamic data.
- **Constant Values:** Some values like wetted area, sail area (implicitly through force coefficients), and mass are constants defined in the constructor.
- **Hydrodynamic Model:** The water friction, wave resistance, and anti-drift forces are based on common formulas but involve simplifications and estimated coefficients.
- **No Heeling:** The boat does not heel (tilt) in the simulation.
- **Instantaneous Force Application:** Forces are calculated and applied at each physics step.

### Data Display:

The game features a data overlay similar to a chartplotter, displaying key telemetry:

- Time
- SOG (Speed Over Ground)
- Heading
- COG (Course Over Ground)
- TWS (True Wind Speed)
- GWD (Geographic Wind Direction - where the true wind is blowing _from_)
- AWS (Apparent Wind Speed)
- AWA (Apparent Wind Angle)

This information is derived directly from the physics state of the `boat` object.

## Future Development Ideas

- More sophisticated physics (e.g., heeling, gusts, more detailed hull/sail interactions).
- Additional levels with varying wind conditions and geography.
- Different boat types with unique characteristics.
- Multiplayer mode
- More complex weather phenomena (e.g., currents, squalls).

---

_This README was last updated on June 11, 2025._
